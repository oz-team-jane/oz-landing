---
description: ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜
alwaysApply: false
---
# OneTrip AI ì—¬í–‰ ê³„íš ìë™í™” ì„œë¹„ìŠ¤ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

## ğŸ¯ í”„ë¡œì íŠ¸ ê°œìš”
- **ì„œë¹„ìŠ¤ëª…**: OneTrip (ì›íŠ¸ë¦½)
- **ëª©ì **: AI ê¸°ë°˜ ì—¬í–‰ ê³„íš ìë™í™” ì›¹ ì„œë¹„ìŠ¤
- **í•µì‹¬ ê¸°ëŠ¥**: í©ì–´ì§„ ì—¬í–‰ ì •ë³´ë¥¼ AIê°€ ë¶„ì„í•˜ì—¬ ìµœì í™”ëœ ì—¬í–‰ ê³„íš ìë™ ìƒì„±

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ì•„í‚¤í…ì²˜ êµ¬ì„±ìš”ì†Œ
```mermaid
graph TB
    subgraph "í”„ë¡ íŠ¸ì—”ë“œ ê³„ì¸µ"
        A[Next.js 15 + TypeScript]
        B[Tailwind CSS + Shadcn/ui]
        C[Mapbox GL JS]
        D[TanStack Query]
        E[Zustand ìƒíƒœê´€ë¦¬]
    end

    subgraph "ë°±ì—”ë“œ API ê³„ì¸µ"
        F[FastAPI + Python 3.12]
        G[Pydantic ë°ì´í„° ê²€ì¦]
        H[JWT ì¸ì¦/ì¸ê°€]
        I[CORS Middleware]
    end

    subgraph "AI Agent ê³„ì¸µ"
        J[LangGraph ì›Œí¬í”Œë¡œìš°]
        K[GPT-4o ë©”ì¸ ëª¨ë¸]
        L[GPT-4o-mini ê²½ëŸ‰ ëª¨ë¸]
        M[NLP ì²˜ë¦¬ ì—”ì§„]
        N[ëª¨í˜¸í•¨ íƒì§€ ì‹œìŠ¤í…œ]
    end

    subgraph "ë°ì´í„° ê³„ì¸µ"
        O[(PostgreSQL 16)]
        P[(Redis 7)]
        Q[Supabase BaaS]
    end

    subgraph "ì™¸ë¶€ API í†µí•©"
        R[OpenAI API]
        S[Google Maps API]
        T[GoogleAPI/NaverAPI]
        U[Weather API]
    end

    subgraph "íŒŒì¼ ì²˜ë¦¬ ì‹œìŠ¤í…œ"
        V[PDF íŒŒì‹± - PyPDF2]
        W[OCR ì²˜ë¦¬ - Tesseract]
        X[ì´ë¯¸ì§€ ì²˜ë¦¬ - Pillow]
    end

    A --> F
    B --> A
    C --> A
    D --> F
    E --> A
    F --> J
    G --> F
    H --> F
    I --> F
    J --> K
    J --> L
    J --> M
    J --> N
    F --> O
    F --> P
    F --> Q
    J --> R
    J --> S
    J --> T
    J --> U
    F --> V
    F --> W
    F --> X
```

### ê³„ì¸µ êµ¬ì¡° ë° ë°ì´í„° íë¦„
```mermaid
flowchart TD
    subgraph "í´ë¼ì´ì–¸íŠ¸ ê³„ì¸µ"
        USER[ì‚¬ìš©ì]
        BROWSER[ì›¹ ë¸Œë¼ìš°ì €]
    end

    subgraph "í”„ë ˆì  í…Œì´ì…˜ ê³„ì¸µ"
        NEXTJS[Next.js App Router]
        UI[React ì»´í¬ë„ŒíŠ¸]
        STATE[ìƒíƒœ ê´€ë¦¬]
    end

    subgraph "ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê³„ì¸µ"
        API[FastAPI ì„œë²„]
        AUTH[ì¸ì¦ ë¯¸ë“¤ì›¨ì–´]
        VALID[ë°ì´í„° ê²€ì¦]
    end

    subgraph "AI ì²˜ë¦¬ ê³„ì¸µ"
        AGENT[LangGraph Agent]
        LLM[GPT ëª¨ë¸ë“¤]
        NLP[NLP ì—”ì§„]
        TOOLS[Agent ë„êµ¬ë“¤]
    end

    subgraph "ë°ì´í„° ì ‘ê·¼ ê³„ì¸µ"
        ORM[SQLAlchemy ORM]
        CACHE[Redis ìºì‹œ]
        FILES[íŒŒì¼ ì²˜ë¦¬]
    end

    subgraph "ë°ì´í„° ì €ì¥ ê³„ì¸µ"
        DB[(PostgreSQL)]
        REDIS[(Redis)]
        STORAGE[íŒŒì¼ ìŠ¤í† ë¦¬ì§€]
    end

    subgraph "ì™¸ë¶€ ì„œë¹„ìŠ¤ ê³„ì¸µ"
        OPENAI[OpenAI API]
        MAPS[Google Maps]
        SEARCH[ê²€ìƒ‰ APIë“¤]
        WEATHER[ë‚ ì”¨ API]
    end

    USER --> BROWSER
    BROWSER --> NEXTJS
    NEXTJS --> UI
    UI --> STATE
    STATE --> API
    API --> AUTH
    AUTH --> VALID
    VALID --> AGENT
    AGENT --> LLM
    AGENT --> NLP
    AGENT --> TOOLS
    TOOLS --> OPENAI
    TOOLS --> MAPS
    TOOLS --> SEARCH
    TOOLS --> WEATHER
    API --> ORM
    API --> CACHE
    API --> FILES
    ORM --> DB
    CACHE --> REDIS
    FILES --> STORAGE
```

### ëª¨ë“ˆí™” ë° ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°
```mermaid
graph LR
    subgraph "í”„ë¡ íŠ¸ì—”ë“œ ëª¨ë“ˆ"
        A1[pages/components]
        A2[hooks/utils]
        A3[stores/context]
        A4[types/interfaces]
    end

    subgraph "ë°±ì—”ë“œ ëª¨ë“ˆ"
        B1[routers/endpoints]
        B2[services/business]
        B3[models/schemas]
        B4[utils/helpers]
    end

    subgraph "AI Agent ëª¨ë“ˆ"
        C1[workflows/graphs]
        C2[tools/functions]
        C3[processors/nlp]
        C4[memory/state]
    end

    subgraph "ê³µí†µ ëª¨ë“ˆ"
        D1[types/shared]
        D2[config/settings]
        D3[constants/enums]
        D4[validators/schemas]
    end

    A1 --> B1
    A2 --> B2
    A3 --> C4
    A4 --> D1
    B1 --> C1
    B2 --> C2
    B3 --> D1
    B4 --> D2
    C1 --> D3
    C2 --> D4
    C3 --> D4
    C4 --> D2
```

### API ë° ì¸í„°í˜ì´ìŠ¤ ì„¤ê³„
```mermaid
sequenceDiagram
    participant User as ì‚¬ìš©ì
    participant Web as Next.js ì›¹ì•±
    participant API as FastAPI ì„œë²„
    participant Agent as LangGraph Agent
    participant LLM as GPT-4o
    participant ExtAPI as ì™¸ë¶€ APIë“¤
    participant DB as ë°ì´í„°ë² ì´ìŠ¤

    User->>Web: ì—¬í–‰ ì •ë³´ ì…ë ¥
    Web->>API: POST /api/travel/analyze
    API->>Agent: ì—¬í–‰ ê³„íš ìƒì„± ìš”ì²­
    Agent->>LLM: ì •ë³´ íŒŒì‹± ë° ë¶„ì„
    LLM-->>Agent: êµ¬ì¡°í™”ëœ ë°ì´í„°
    Agent->>ExtAPI: ì‹¤ì‹œê°„ ì •ë³´ ì¡°íšŒ
    ExtAPI-->>Agent: ê²€ìƒ‰ ê²°ê³¼
    Agent->>Agent: ìµœì  ê²½ë¡œ ê³„ì‚°
    Agent->>DB: ê²°ê³¼ ì €ì¥
    Agent-->>API: ì—¬í–‰ ê³„íš ë°˜í™˜
    API-->>Web: JSON ì‘ë‹µ
    Web-->>User: ì‹œê°í™”ëœ ê³„íš í‘œì‹œ
```

### ì‹œìŠ¤í…œ ì™¸ë¶€ í™˜ê²½ê³¼ì˜ ê´€ê³„
```mermaid
graph TB
    subgraph "OneTrip ì‹œìŠ¤í…œ"
        CORE[í•µì‹¬ ì‹œìŠ¤í…œ]
    end

    subgraph "ì™¸ë¶€ API ì„œë¹„ìŠ¤"
        OPENAI_EXT[OpenAI API]
        GOOGLE_EXT[Google Maps API]
        NAVER_EXT[Naver API]
        WEATHER_EXT[Weather API]
    end

    subgraph "í´ë¼ìš°ë“œ ì¸í”„ë¼"
        VERCEL[Vercel í˜¸ìŠ¤íŒ…]
        SUPABASE[Supabase DB]
        CDN[CDN ì„œë¹„ìŠ¤]
    end

    subgraph "ê°œë°œ/ìš´ì˜ ë„êµ¬"
        GITHUB[GitHub Repository]
        SENTRY[Sentry ëª¨ë‹ˆí„°ë§]
        ANALYTICS[Vercel Analytics]
    end

    subgraph "ì‚¬ìš©ì í™˜ê²½"
        DESKTOP[ë°ìŠ¤í¬í†± ë¸Œë¼ìš°ì €]
        MOBILE[ëª¨ë°”ì¼ ë¸Œë¼ìš°ì €]
        PWA[PWA ì•±]
    end

    CORE --> OPENAI_EXT
    CORE --> GOOGLE_EXT
    CORE --> NAVER_EXT
    CORE --> WEATHER_EXT
    CORE --> VERCEL
    CORE --> SUPABASE
    CORE --> CDN
    CORE --> SENTRY
    CORE --> ANALYTICS
    GITHUB --> CORE
    DESKTOP --> CORE
    MOBILE --> CORE
    PWA --> CORE
```

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

### í”„ë¡ íŠ¸ì—”ë“œ
- **Framework**: Next.js 15 (App Router)
- **Language**: TypeScript 5.6+
- **Styling**: Tailwind CSS 4.0 + Shadcn/ui
- **State**: Zustand + TanStack Query v5
- **Maps**: Mapbox GL JS + @vis.gl/react-google-maps
- **Deploy**: Vercel

### ë°±ì—”ë“œ
- **Framework**: FastAPI 0.110+
- **Language**: Python 3.12
- **Database**: PostgreSQL 16 + Redis 7
- **BaaS**: Supabase
- **Auth**: JWT + OAuth2
- **Deploy**: Railway/Fly.io

### AI Agent
- **Framework**: LangGraph + LangChain
- **Models**: GPT-4o + GPT-4o-mini
- **NLP**: spaCy + NLTK + python-dateutil
- **Memory**: LangGraph Local + Persistent Memory
- **Tools**: Custom ë„êµ¬ë“¤ (Maps, Weather, Search ë“±)

### ì™¸ë¶€ API
- **AI**: OpenAI API
- **Maps**: Google Maps API
- **Search**: GoogleAPI + NaverAPI
- **Weather**: Weather API

## ğŸ“ ê°œë°œ ê°€ì´ë“œë¼ì¸

### ì½”ë“œ ìŠ¤íƒ€ì¼
- TypeScript Strict Mode ì‚¬ìš©
- ESLint + Prettier ì¤€ìˆ˜
- ì»´í¬ë„ŒíŠ¸ëŠ” í•¨ìˆ˜í˜•ìœ¼ë¡œ ì‘ì„±
- Custom Hookìœ¼ë¡œ ë¡œì§ ë¶„ë¦¬
- Pydantic ëª¨ë¸ë¡œ ë°ì´í„° ê²€ì¦

### í´ë” êµ¬ì¡°
```
frontend/
â”œâ”€â”€ app/                 # Next.js App Router
â”œâ”€â”€ components/          # ì¬ì‚¬ìš© ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ hooks/              # Custom Hooks
â”œâ”€â”€ lib/                # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”œâ”€â”€ stores/             # Zustand ìŠ¤í† ì–´
â””â”€â”€ types/              # TypeScript íƒ€ì…

backend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ routers/        # FastAPI ë¼ìš°í„°
â”‚   â”œâ”€â”€ services/       # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”œâ”€â”€ models/         # Pydantic ëª¨ë¸
â”‚   â”œâ”€â”€ utils/          # ìœ í‹¸ë¦¬í‹°
â”‚   â””â”€â”€ agents/         # LangGraph Agent
â”œâ”€â”€ tests/              # í…ŒìŠ¤íŠ¸ ì½”ë“œ
â””â”€â”€ requirements.txt    # Python ì˜ì¡´ì„±
```

### ê°œë°œ ìš°ì„ ìˆœìœ„
1. **MVP ê¸°ëŠ¥**: ê¸°ë³¸ í…ìŠ¤íŠ¸ ì…ë ¥ â†’ AI ë¶„ì„ â†’ ì—¬í–‰ ê³„íš ìƒì„±
2. **íŒŒì¼ ì²˜ë¦¬**: PDF/ì´ë¯¸ì§€ íŒŒì‹± ì¶”ê°€
3. **ì‹¤ì‹œê°„ ê¸°ëŠ¥**: ì¶”ì²œ ë¦¬ìŠ¤íŠ¸ í´ë¦­ìœ¼ë¡œ ì¼ì • ìˆ˜ì •
4. **ê³ ê¸‰ ê¸°ëŠ¥**: ëª¨í˜¸í•¨ í•´ê²°, í˜‘ì—…, ê³µìœ  ê¸°ëŠ¥

### ì„±ëŠ¥ ìµœì í™”
- Next.js App Routerë¡œ ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§
- TanStack Queryë¡œ API ìºì‹±
- Redisë¡œ ë°±ì—”ë“œ ìºì‹±
- ì´ë¯¸ì§€ ìµœì í™” ë° CDN í™œìš©
- LangGraph ì›Œí¬í”Œë¡œìš° ë¹„ë™ê¸° ì²˜ë¦¬ # OneTrip AI ì—¬í–‰ ê³„íš ìë™í™” ì„œë¹„ìŠ¤ - Cursor Rules